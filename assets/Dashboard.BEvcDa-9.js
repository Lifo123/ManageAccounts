import{r as c}from"./index.DhYZZe0J.js";let l=[],y=(r,f)=>{let i=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},l:0,lc:0,listen(n,u){return e.lc=i.push(n,u||e.l)/2,()=>{let s=i.indexOf(n);~s&&(i.splice(s,2),--e.lc||e.off())}},notify(n,u){let s=!l.length;for(let t=0;t<i.length;t+=2)l.push(i[t],i[t+1],e.value,n,u);if(s){for(let t=0;t<l.length;t+=5){let a;for(let o=t+1;!a&&(o+=5)<l.length;)l[o]<l[t+1]&&(a=l.push(l[t],l[t+1],l[t+2],l[t+3],l[t+4]));a||l[t](l[t+2],l[t+3],l[t+4])}l.length=0}},off(){},set(n){let u=e.value;u!==n&&(e.value=n,e.notify(u))},subscribe(n,u){let s=e.listen(n,u);return n(e.value),s},value:r};return e};function b(r,f,i){let e=new Set([...f,void 0]);return r.listen((n,u,s)=>{e.has(s)&&i(n,u,s)})}function v(r,f={}){let i=c.useCallback(n=>f.keys?b(r,f.keys,n):r.listen(n),[f.keys,r]),e=r.get.bind(r);return c.useSyncExternalStore(i,e,e)}const S=y([]),d=y([]);export{d as C,S as P,y as a,v as u};
