import{r as c}from"./index.DhYZZe0J.js";let l=[],y=(s,f)=>{let i=[],e={get(){return e.lc||e.listen(()=>{})(),e.value},l:0,lc:0,listen(n,u){return e.lc=i.push(n,u||e.l)/2,()=>{let r=i.indexOf(n);~r&&(i.splice(r,2),--e.lc||e.off())}},notify(n,u){let r=!l.length;for(let t=0;t<i.length;t+=2)l.push(i[t],i[t+1],e.value,n,u);if(r){for(let t=0;t<l.length;t+=5){let a;for(let o=t+1;!a&&(o+=5)<l.length;)l[o]<l[t+1]&&(a=l.push(l[t],l[t+1],l[t+2],l[t+3],l[t+4]));a||l[t](l[t+2],l[t+3],l[t+4])}l.length=0}},off(){},set(n){let u=e.value;u!==n&&(e.value=n,e.notify(u))},subscribe(n,u){let r=e.listen(n,u);return n(e.value),r},value:s};return e};function b(s,f,i){let e=new Set([...f,void 0]);return s.listen((n,u,r)=>{e.has(r)&&i(n,u,r)})}function v(s,f={}){let i=c.useCallback(n=>f.keys?b(s,f.keys,n):s.listen(n),[f.keys,s]),e=s.get.bind(s);return c.useSyncExternalStore(i,e,e)}const S=y([]),d=y([]);export{S as A,d as C,y as a,v as u};
